<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="IPTV Pro">
    <title>IPTV Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap');
        * { font-family: 'Cairo', sans-serif; -webkit-tap-highlight-color: transparent; user-select: none; }
        body { background: #000; color: #fff; overscroll-behavior: none; position: fixed; width: 100%; height: 100%; }
        @media (orientation: portrait) { .portrait-warning { display: flex !important; } .app-container { display: none !important; } }
        .portrait-warning { display: none; position: fixed; inset: 0; background: linear-gradient(135deg, #1e3a8a, #3b82f6); align-items: center; justify-content: center; flex-direction: column; z-index: 99999; text-align: center; padding: 20px; }
        .safe-area { padding-top: env(safe-area-inset-top); padding-bottom: env(safe-area-inset-bottom); padding-left: env(safe-area-inset-left); padding-right: env(safe-area-inset-right); }
        .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-track { background: #1f2937; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 3px; }
        @keyframes pulse-red { 0%, 100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.7; transform: scale(1.05); } }
        .animate-pulse-red { animation: pulse-red 1.5s infinite; }
        .touch-active:active { transform: scale(0.95); opacity: 0.8; }
        .skeleton { background: linear-gradient(90deg, #1f2937 25%, #374151 50%, #1f2937 75%); background-size: 200% 100%; animation: loading 1.5s infinite; }
        @keyframes loading { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
        .install-banner { position: fixed; bottom: 0; left: 0; right: 0; background: #1f2937; border-top: 1px solid #374151; padding: 16px; transform: translateY(100%); transition: transform 0.3s ease; z-index: 1000; }
        .install-banner.show { transform: translateY(0); }
        .offline-bar { position: fixed; top: 0; left: 0; right: 0; background: #ef4444; color: white; text-align: center; padding: 8px; font-size: 14px; transform: translateY(-100%); transition: transform 0.3s; z-index: 1001; }
        .offline-bar.show { transform: translateY(0); }
    </style>
</head>
<body class="safe-area">
    <div class="portrait-warning">
        <div class="text-6xl mb-4">ğŸ“±</div>
        <h2 class="text-2xl font-bold mb-2">ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø¬Ù‡Ø§Ø² Ù…Ø·Ù„ÙˆØ¨</h2>
        <p class="text-lg opacity-90">ÙŠØ±Ø¬Ù‰ ØªØ¯ÙˆÙŠØ± iPad Ù„Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø£ÙÙ‚ÙŠ</p>
        <div class="mt-6 text-4xl animate-spin" style="animation-duration: 3s;">â†»</div>
    </div>
    <div id="offlineBar" class="offline-bar"><i class="fas fa-wifi-slash mr-2"></i>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª</div>
    <div id="installBanner" class="install-banner">
        <div class="flex items-center justify-between max-w-2xl mx-auto">
            <div class="flex items-center gap-3">
                <div class="w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center"><i class="fas fa-tv text-xl"></i></div>
                <div><h3 class="font-bold">ØªØ«Ø¨ÙŠØª IPTV Pro</h3><p class="text-sm text-gray-400">Ø£Ø¶Ù Ù„Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</p></div>
            </div>
            <div class="flex gap-2">
                <button onclick="installApp()" class="bg-blue-600 px-4 py-2 rounded-lg font-bold text-sm">ØªØ«Ø¨ÙŠØª</button>
                <button onclick="dismissInstall()" class="text-gray-400 px-3"><i class="fas fa-times"></i></button>
            </div>
        </div>
    </div>
    <div class="app-container h-full flex flex-col bg-gray-900">
        <header class="h-14 bg-gray-800/95 backdrop-blur border-b border-gray-700 flex items-center justify-between px-4 flex-none z-50">
            <div class="flex items-center gap-3">
                <div class="w-9 h-9 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center"><i class="fas fa-play text-sm"></i></div>
                <div><h1 class="font-bold text-sm leading-tight">IPTV Pro</h1><span class="text-[10px] text-gray-400">v2.0</span></div>
            </div>
            <div class="flex items-center gap-2">
                <button onclick="showImport()" class="w-9 h-9 rounded-lg bg-blue-600 flex items-center justify-center touch-active"><i class="fas fa-plus text-sm"></i></button>
                <button onclick="showSettings()" class="w-9 h-9 rounded-lg bg-gray-700 flex items-center justify-center touch-active"><i class="fas fa-cog text-sm"></i></button>
            </div>
        </header>
        <div class="flex-1 flex overflow-hidden">
            <aside class="w-72 bg-gray-800/50 border-l border-gray-700 flex flex-col hidden md:flex">
                <div class="p-3 border-b border-gray-700">
                    <div class="relative">
                        <input type="text" id="searchInput" placeholder="Ø¨Ø­Ø«..." class="w-full bg-gray-900/50 border border-gray-600 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-blue-500">
                        <i class="fas fa-search absolute left-3 top-2.5 text-gray-500 text-xs"></i>
                    </div>
                </div>
                <div class="flex gap-1 p-2 overflow-x-auto border-b border-gray-700">
                    <button onclick="setCategory('all')" class="cat-btn active px-3 py-1 rounded-full bg-blue-600 text-xs whitespace-nowrap">Ø§Ù„ÙƒÙ„</button>
                    <button onclick="setCategory('news')" class="cat-btn px-3 py-1 rounded-full bg-gray-700 text-xs whitespace-nowrap">Ø£Ø®Ø¨Ø§Ø±</button>
                    <button onclick="setCategory('sports')" class="cat-btn px-3 py-1 rounded-full bg-gray-700 text-xs whitespace-nowrap">Ø±ÙŠØ§Ø¶Ø©</button>
                    <button onclick="setCategory('fav')" class="cat-btn px-3 py-1 rounded-full bg-gray-700 text-xs whitespace-nowrap">Ù…ÙØ¶Ù„Ø©</button>
                </div>
                <div id="channelsList" class="flex-1 overflow-y-auto custom-scroll p-2 space-y-1">
                    <div class="skeleton h-12 rounded-lg mx-1"></div>
                    <div class="skeleton h-12 rounded-lg mx-1"></div>
                    <div class="skeleton h-12 rounded-lg mx-1"></div>
                </div>
                <div class="p-2 border-t border-gray-700 bg-gray-900/30 text-xs">
                    <div class="flex justify-between text-gray-400 mb-1"><span id="channelCount">0 Ù‚Ù†Ø§Ø©</span><span id="statusText">Ø¬Ø§Ù‡Ø²</span></div>
                    <div class="w-full h-1 bg-gray-700 rounded-full overflow-hidden"><div id="bufferProgress" class="h-full bg-blue-500 w-0 transition-all"></div></div>
                </div>
            </aside>
            <main class="flex-1 flex flex-col bg-black relative">
                <div class="flex-1 relative flex items-center justify-center overflow-hidden group">
                    <video id="videoPlayer" class="w-full h-full max-h-full" controls playsinline webkit-playsinline preload="auto"></video>
                    <div id="centerPlay" class="absolute inset-0 flex items-center justify-center bg-black/20 opacity-0 group-active:opacity-100 transition-opacity md:hidden pointer-events-none">
                        <button onclick="togglePlay()" class="pointer-events-auto w-20 h-20 bg-white/20 backdrop-blur rounded-full flex items-center justify-center touch-active"><i id="centerIcon" class="fas fa-play text-3xl ml-1"></i></button>
                    </div>
                    <div id="recBadge" class="hidden absolute top-4 right-4 bg-red-600/90 px-3 py-1.5 rounded-full flex items-center gap-2 z-10 animate-pulse-red"><div class="w-2 h-2 bg-white rounded-full"></div><span class="text-xs font-bold">REC</span><span id="recTime" class="text-xs font-mono">00:00</span></div>
                    <div class="absolute top-4 left-4 bg-red-600 px-3 py-1 rounded-full flex items-center gap-1.5 z-10 shadow-lg shadow-red-600/30"><span class="w-1.5 h-1.5 bg-white rounded-full animate-pulse"></span><span class="text-xs font-bold">LIVE</span></div>
                    <div id="loadingOverlay" class="hidden absolute inset-0 flex flex-col items-center justify-center bg-black/90 z-20"><div class="w-12 h-12 border-3 border-blue-500 border-t-transparent rounded-full animate-spin mb-3"></div><p class="text-gray-400 text-sm">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p></div>
                </div>
                <div class="h-14 bg-gray-800/95 border-t border-gray-700 flex items-center justify-between px-3 flex-none">
                    <div class="flex items-center gap-2">
                        <button onclick="prevChannel()" class="w-10 h-10 rounded-lg bg-gray-700 flex items-center justify-center touch-active"><i class="fas fa-step-backward text-sm"></i></button>
                        <button onclick="togglePlay()" id="playBtn" class="w-12 h-12 rounded-lg bg-blue-600 flex items-center justify-center touch-active"><i id="playIcon" class="fas fa-play text-lg ml-0.5"></i></button>
                        <button onclick="nextChannel()" class="w-10 h-10 rounded-lg bg-gray-700 flex items-center justify-center touch-active"><i class="fas fa-step-forward text-sm"></i></button>
                        <div class="hidden sm:block ml-2"><div id="nowPlaying" class="font-bold text-xs truncate max-w-[120px]">Ø§Ø®ØªØ± Ù‚Ù†Ø§Ø©</div><div id="nowPlayingCat" class="text-[10px] text-gray-400">--</div></div>
                    </div>
                    <div class="flex items-center gap-1.5">
                        <button onclick="toggleRec()" id="recBtn" class="w-9 h-9 rounded-lg bg-gray-700 flex items-center justify-center touch-active"><i class="fas fa-circle text-red-500 text-xs"></i></button>
                        <button onclick="togglePiP()" class="w-9 h-9 rounded-lg bg-gray-700 flex items-center justify-center touch-active"><i class="fas fa-images text-xs"></i></button>
                        <button onclick="toggleFullscreen()" class="w-9 h-9 rounded-lg bg-gray-700 flex items-center justify-center touch-active"><i class="fas fa-expand text-xs"></i></button>
                    </div>
                </div>
            </main>
        </div>
    </div>
    <div id="importModal" class="hidden fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4 backdrop-blur">
        <div class="bg-gray-800 rounded-2xl w-full max-w-sm p-5 border border-gray-700">
            <h3 class="text-lg font-bold mb-4">Ø¥Ø¶Ø§ÙØ© Ù‚Ù†ÙˆØ§Øª</h3>
            <div class="space-y-2">
                <button onclick="importURL()" class="w-full bg-blue-600 py-3 rounded-xl flex items-center justify-center gap-2 touch-active"><i class="fas fa-link"></i><span>Ù…Ù† Ø±Ø§Ø¨Ø· M3U</span></button>
                <button onclick="importFile()" class="w-full bg-gray-700 py-3 rounded-xl flex items-center justify-center gap-2 touch-active"><i class="fas fa-file"></i><span>Ù…Ù† Ù…Ù„Ù</span></button>
                <button onclick="loadDemo()" class="w-full bg-gray-700 py-3 rounded-xl flex items-center justify-center gap-2 touch-active"><i class="fas fa-broadcast-tower"></i><span>Ù‚Ù†ÙˆØ§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©</span></button>
            </div>
            <button onclick="closeImport()" class="w-full mt-3 bg-gray-600 py-2 rounded-xl text-sm">Ø¥Ù„ØºØ§Ø¡</button>
        </div>
    </div>
    <div id="settingsModal" class="hidden fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4 backdrop-blur">
        <div class="bg-gray-800 rounded-2xl w-full max-w-sm p-5 border border-gray-700">
            <h3 class="text-lg font-bold mb-4">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h3>
            <div class="space-y-3">
                <div class="flex items-center justify-between p-3 bg-gray-700/50 rounded-xl"><span class="text-sm">Ø§Ù„Ø¬ÙˆØ¯Ø©</span><select id="quality" class="bg-gray-700 rounded-lg px-2 py-1 text-xs"><option value="auto">ØªÙ„Ù‚Ø§Ø¦ÙŠ</option><option value="1080">1080p</option><option value="720">720p</option></select></div>
                <button onclick="clearData()" class="w-full bg-red-600/20 text-red-400 border border-red-600/30 py-2 rounded-xl text-sm">Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
            </div>
            <button onclick="closeSettings()" class="w-full mt-3 bg-gray-600 py-2 rounded-xl text-sm">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>
    <div id="toastContainer" class="fixed bottom-20 left-1/2 transform -translate-x-1/2 z-50 space-y-2 pointer-events-none"></div>
    <script>
        let deferredPrompt = null;
        window.addEventListener('beforeinstallprompt', (e) => { e.preventDefault(); deferredPrompt = e; setTimeout(() => { document.getElementById('installBanner').classList.add('show'); }, 2000); });
        function installApp() { if (deferredPrompt) { deferredPrompt.prompt(); deferredPrompt.userChoice.then(() => { document.getElementById('installBanner').classList.remove('show'); deferredPrompt = null; }); } }
        function dismissInstall() { document.getElementById('installBanner').classList.remove('show'); }
        let channels = [], currentChannel = null, currentCat = 'all', hls = null, isRecording = false, recInterval = null, recSec = 0, favorites = JSON.parse(localStorage.getItem('fav') || '[]');
        document.addEventListener('DOMContentLoaded', () => { loadChannels(); setupGestures(); preventSleep(); window.addEventListener('online', () => { document.getElementById('offlineBar').classList.remove('show'); showToast('Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª'); }); window.addEventListener('offline', () => { document.getElementById('offlineBar').classList.add('show'); }); });
        function loadChannels() { const saved = localStorage.getItem('channels'); if (saved) { channels = JSON.parse(saved); renderChannels(); } else { loadDemo(); } }
        function saveChannels() { localStorage.setItem('channels', JSON.stringify(channels)); }
        function renderChannels() { const list = document.getElementById('channelsList'), search = document.getElementById('searchInput').value.toLowerCase(); let filtered = channels.filter(ch => { const matchSearch = ch.name.toLowerCase().includes(search); const matchCat = currentCat === 'all' ? true : currentCat === 'fav' ? favorites.includes(ch.id) : ch.category === currentCat; return matchSearch && matchCat; }); list.innerHTML = filtered.map(ch => `<div onclick="playChannel(${ch.id})" class="p-2.5 rounded-xl flex items-center gap-2 cursor-pointer touch-active ${currentChannel?.id === ch.id ? 'bg-blue-600' : 'bg-gray-800 hover:bg-gray-700'}"><div class="w-10 h-10 bg-gray-900 rounded-lg flex items-center justify-center text-lg">${ch.logo ? `<img src="${ch.logo}" class="w-full h-full object-cover rounded-lg" onerror="this.style.display='none'">` : 'ğŸ“º'}</div><div class="flex-1 min-w-0"><div class="font-bold text-xs truncate">${ch.name}</div><div class="text-[10px] ${currentChannel?.id === ch.id ? 'text-blue-200' : 'text-gray-400'}">${ch.category || 'Ø¹Ø§Ù…'}</div></div>${favorites.includes(ch.id) ? 'â¤ï¸' : ''}</div>`).join(''); document.getElementById('channelCount').textContent = `${filtered.length} Ù‚Ù†Ø§Ø©`; }
        function setCategory(cat) { currentCat = cat; document.querySelectorAll('.cat-btn').forEach(btn => { btn.classList.remove('active', 'bg-blue-600'); btn.classList.add('bg-gray-700'); }); event.target.classList.add('active', 'bg-blue-600'); event.target.classList.remove('bg-gray-700'); renderChannels(); }
        function playChannel(id) { const ch = channels.find(c => c.id === id); if (!ch) return; currentChannel = ch; document.getElementById('nowPlaying').textContent = ch.name; document.getElementById('nowPlayingCat').textContent = ch.category || 'Ø¨Ø« Ù…Ø¨Ø§Ø´Ø±'; const video = document.getElementById('videoPlayer'); if (hls) { hls.destroy(); hls = null; } document.getElementById('loadingOverlay').classList.remove('hidden'); document.getElementById('statusText').textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...'; try { if (Hls.isSupported()) { hls = new Hls({ enableWorker: true, maxBufferLength: 30 }); hls.loadSource(ch.url); hls.attachMedia(video); hls.on(Hls.Events.MANIFEST_PARSED, () => { video.play(); updatePlayBtn(true); document.getElementById('loadingOverlay').classList.add('hidden'); document.getElementById('statusText').textContent = 'ÙŠØ¹Ù…Ù„'; renderChannels(); }); } else if (video.canPlayType('application/vnd.apple.mpegurl')) { video.src = ch.url; video.play(); updatePlayBtn(true); document.getElementById('loadingOverlay').classList.add('hidden'); renderChannels(); } } catch (e) { showToast('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ´ØºÙŠÙ„', 'error'); document.getElementById('loadingOverlay').classList.add('hidden'); } }
        function togglePlay() { const video = document.getElementById('videoPlayer'); if (video.paused) { video.play(); updatePlayBtn(true); } else { video.pause(); updatePlayBtn(false); } }
        function updatePlayBtn(playing) { const icon = playing ? 'fa-pause' : 'fa-play'; document.getElementById('playIcon').className = `fas ${icon} text-lg ${playing ? '' : 'ml-0.5'}`; document.getElementById('centerIcon').className = `fas ${icon} text-3xl ${playing ? '' : 'ml-1'}`; }
        function prevChannel() { const idx = channels.findIndex(c => c.id === currentChannel?.id); if (idx > 0) playChannel(channels[idx - 1].id); }
        function nextChannel() { const idx = channels.findIndex(c => c.id === currentChannel?.id); if (idx < channels.length - 1) playChannel(channels[idx + 1].id); }
        function toggleRec() { if (isRecording) { stopRec(); } else { startRec(); } }
        function startRec() { showToast('Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ØºÙŠØ± Ù…ØªØ§Ø­ ÙÙŠ PWA'); isRecording = true; document.getElementById('recBadge').classList.remove('hidden'); recSec = 0; recInterval = setInterval(() => { recSec++; const m = Math.floor(recSec / 60).toString().padStart(2, '0'); const s = (recSec % 60).toString().padStart(2, '0'); document.getElementById('recTime').textContent = `00:${m}:${s}`; }, 1000); setTimeout(stopRec, 3000); }
        function stopRec() { isRecording = false; clearInterval(recInterval); document.getElementById('recBadge').classList.add('hidden'); }
        async function togglePiP() { const video = document.getElementById('videoPlayer'); if (document.pictureInPictureElement) { await document.exitPictureInPicture(); } else if (video.requestPictureInPicture) { await video.requestPictureInPicture(); } else if (video.webkitSupportsPresentationMode) { video.webkitSetPresentationMode('picture-in-picture'); } }
        function toggleFullscreen() { const video = document.getElementById('videoPlayer'); if (!document.fullscreenElement) { video.requestFullscreen?.() || video.webkitRequestFullscreen?.(); } else { document.exitFullscreen?.(); } }
        function showImport() { document.getElementById('importModal').classList.remove('hidden'); }
        function closeImport() { document.getElementById('importModal').classList.add('hidden'); }
        async function importURL() { const url = prompt('Ø±Ø§Ø¨Ø· M3U:'); if (!url) return; try { const res = await fetch(url); const text = await res.text(); parseM3U(text); saveChannels(); closeImport(); showToast('ØªÙ… Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯!'); } catch (e) { showToast('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯', 'error'); } }
        function importFile() { const input = document.createElement('input'); input.type = 'file'; input.accept = '.m3u,.m3u8'; input.onchange = (e) => { const file = e.target.files[0]; const reader = new FileReader(); reader.onload = (ev) => { parseM3U(ev.target.result); saveChannels(); closeImport(); showToast('ØªÙ… Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯!'); }; reader.readAsText(file); }; input.click(); }
        function loadDemo() { channels = [{id: 1, name: 'Ø§Ù„Ø¬Ø²ÙŠØ±Ø©', category: 'news', url: 'https://live-hls-web-aja.getaj.net/AJA/index.m3u8'}, {id: 2, name: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©', category: 'news', url: 'https://av.alarabiya.net/alarabiapublish/alarabiya.smil/playlist.m3u8'}, {id: 3, name: 'Ø§Ù„Ø­Ø¯Ø«', category: 'news', url: 'https://av.alarabiya.net/alarabiapublish/alhadath.smil/playlist.m3u8'}, {id: 4, name: 'BeIN Sports', category: 'sports', url: 'https://example.com/bein.m3u8'}, {id: 5, name: 'MBC 1', category: 'entertainment', url: 'https://example.com/mbc1.m3u8'}]; saveChannels(); renderChannels(); closeImport(); }
        function parseM3U(content) { const lines = content.split('\n'); let cur = {}; channels = []; lines.forEach(line => { line = line.trim(); if (line.startsWith('#EXTINF:')) { const name = line.match(/,(.+)$/)?.[1] || 'Unknown'; const cat = line.match(/group-title="([^"]+)"/)?.[1] || 'Ø¹Ø§Ù…'; cur = {name, category: cat}; } else if (line && !line.startsWith('#') && cur.name) { channels.push({id: Date.now() + Math.random(), ...cur, url: line}); cur = {}; } }); renderChannels(); }
        function showSettings() { document.getElementById('settingsModal').classList.remove('hidden'); }
        function closeSettings() { document.getElementById('settingsModal').classList.add('hidden'); }
        function clearData() { if (confirm('Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„ØŸ')) { localStorage.clear(); channels = []; renderChannels(); showToast('ØªÙ… Ø§Ù„Ù…Ø³Ø­'); closeSettings(); } }
        function setupGestures() { let startX = 0; const video = document.querySelector('.flex-1.relative'); video.addEventListener('touchstart', (e) => { startX = e.touches[0].clientX; }, {passive: true}); video.addEventListener('touchend', (e) => { const endX = e.changedTouches[0].clientX; const diff = startX - endX; if (Math.abs(diff) > 80) { diff > 0 ? nextChannel() : prevChannel(); } }, {passive: true}); }
        function preventSleep() { if ('wakeLock' in navigator) { navigator.wakeLock.request('screen').catch(() => {}); } }
        function showToast(msg, type = 'success') { const div = document.createElement('div'); const bg = type === 'error' ? 'bg-red-600' : 'bg-green-600'; div.className = `${bg} text-white px-4 py-2 rounded-full text-sm shadow-xl animate-bounce`; div.textContent = msg; document.getElementById('toastContainer').appendChild(div); setTimeout(() => div.remove(), 3000); }
        document.getElementById('searchInput').addEventListener('input', renderChannels);
    </script>
</body>
</html>
